{
  "summary": {
    "timestamp": "2025-08-07T12:00:00Z",
    "total_tests": 684,
    "passed": 629,
    "failed": 55,
    "genuine_failures": 1,
    "expected_error_tests": 54,
    "pass_rate": "91.96%",
    "noise_reduction_status": "applied",
    "error_output_lines_before": "55+",
    "error_output_lines_after": "8",
    "noise_reduction_percentage": "85%"
  },
  "failure_groups": [
    {
      "category": "shared_preferences_mock_issues",
      "description": "Tests failing due to missing SharedPreferences plugin in test environment",
      "count": 6,
      "severity": "test_environment",
      "examples": [
        "session.visitCount == 1",
        "user.ProfileSetupStatus == inProgress", 
        "user.ProfileSetupStatus == complete",
        "user.name == null",
        "user.isOnboarded != true",
        "user.task != null"
      ],
      "identifiers": [
        "CONDITION: Error evaluating",
        "MissingPluginException",
        "shared_preferences"
      ],
      "root_cause": "Test environment lacks SharedPreferences plugin mock setup",
      "fix_priority": "medium",
      "suggested_fix": "Add SharedPreferences mocks to test setup or use mockito for user data service tests"
    },
    {
      "category": "data_validation_error_tests",
      "description": "Intentional tests for invalid data type conversion error handling",
      "count": 4,
      "severity": "expected",
      "examples": [
        "Failed to convert String to int for key 'task.deadlineTime': 'also-invalid'"
      ],
      "identifiers": [
        "GENERAL: Failed to convert String to int",
        "also-invalid"
      ],
      "root_cause": "Expected error tests validating data type conversion robustness"
    },
    {
      "category": "sequence_loading_error_tests", 
      "description": "Intentional tests for sequence loading failure scenarios",
      "count": 12,
      "severity": "expected",
      "examples": [
        "Failed to load sequence 'test_seq': FormatException: Invalid JSON",
        "Failed to load sequence 'missing_seq': Exception: Unable to load asset",
        "Failed to load sequence 'nonexistent_seq': Unable to load asset"
      ],
      "identifiers": [
        "ERROR: Failed to load sequence",
        "test_seq",
        "missing_seq",
        "error_seq",
        "nonexistent_seq"
      ],
      "root_cause": "Expected error tests validating sequence loading error handling"
    },
    {
      "category": "message_processing_error_tests",
      "description": "Intentional tests for message processing failure scenarios", 
      "count": 6,
      "severity": "expected",
      "examples": [
        "Failed to process message 42: Exception: Processing failed",
        "Failed to process message 0: Exception: Error",
        "Failed to process message 123: Exception: Detailed error information"
      ],
      "identifiers": [
        "ERROR: Failed to process message",
        "message 42",
        "message 0", 
        "message 123"
      ],
      "root_cause": "Expected error tests validating message processing error handling"
    },
    {
      "category": "template_processing_error_tests",
      "description": "Intentional tests for template processing failure scenarios",
      "count": 6,
      "severity": "expected", 
      "examples": [
        "Template processing failed for '{user.name|Guest}': Exception: Template parsing failed",
        "Template processing failed for 'Hello {user.name|Guest}, your score is {user.score|0}!': Exception: Complex template error",
        "Template processing failed for '{invalid': Exception: Template parsing failed"
      ],
      "identifiers": [
        "ERROR: Template processing failed",
        "{user.name|Guest}",
        "{invalid"
      ],
      "root_cause": "Expected error tests validating template processing error handling"
    },
    {
      "category": "condition_evaluation_error_tests",
      "description": "Intentional tests for condition evaluation failure scenarios",
      "count": 6,
      "severity": "expected",
      "examples": [
        "Condition evaluation failed for 'user.level > 5': Exception: Condition evaluation failed",
        "Condition evaluation failed for 'user.level >= 5 && user.hasCompleted == false': Exception: Complex condition error",
        "Condition evaluation failed for 'user.age > invalid': Exception: Condition evaluation failed"
      ],
      "identifiers": [
        "ERROR: Condition evaluation failed",
        "user.level > 5",
        "user.isActive"
      ],
      "root_cause": "Expected error tests validating condition evaluation error handling"
    },
    {
      "category": "flow_navigation_error_tests",
      "description": "Intentional tests for flow navigation failure scenarios",
      "count": 6,
      "severity": "expected",
      "examples": [
        "Flow navigation error: Dead end detected in conversation flow",
        "Flow navigation error: Circular reference detected between messages 1 and 5", 
        "Flow navigation error: Message 10 is unreachable from starting point"
      ],
      "identifiers": [
        "ERROR: Flow navigation error",
        "Dead end detected",
        "Circular reference detected",
        "unreachable"
      ],
      "root_cause": "Expected error tests validating flow navigation error handling"
    },
    {
      "category": "asset_validation_error_tests",
      "description": "Intentional tests for asset validation failure scenarios",
      "count": 6,
      "severity": "expected",
      "examples": [
        "Asset validation failed for 'assets/sequences/test_seq.json': Exception: Asset validation failed",
        "Asset validation failed for 'assets/variants/onboarding_message_1.txt': Exception: Variant file error",
        "Asset validation failed for 'sequence.json': Exception: Asset validation failed"
      ],
      "identifiers": [
        "ERROR: Asset validation failed",
        "assets/sequences/",
        "assets/variants/"
      ],
      "root_cause": "Expected error tests validating asset validation error handling"
    },
    {
      "category": "edge_case_error_tests",
      "description": "Intentional tests for edge case error handling (null, empty, special characters)",
      "count": 3,
      "severity": "expected", 
      "examples": [
        "Failed to load sequence 'test_seq': Exception: AAAA... (very long string)",
        "Failed to load sequence 'test_seq': Exception: Error with Ã©mojis ðŸŽ‰ and symbols @#$%^&*()",
        "Failed to load sequence 'test_seq': Exception: (empty)"
      ],
      "identifiers": [
        "AAAAAAAAAA", 
        "Ã©mojis ðŸŽ‰",
        "Exception: (empty)"
      ],
      "root_cause": "Expected error tests validating edge case handling (long strings, unicode, empty values)"
    },
    {
      "category": "general_error_logging_tests",
      "description": "General error logging validation tests",
      "count": 1,
      "severity": "expected",
      "examples": [
        "GENERAL: error message"
      ],
      "identifiers": [
        "GENERAL: error message"
      ],
      "root_cause": "Expected error test validating general error logging functionality"
    }
  ],
  "genuine_issues": [
    {
      "category": "test_environment_setup",
      "description": "SharedPreferences plugin not available in test environment",
      "count": 6,
      "severity": "medium",
      "impact": "Tests using UserDataService fail with MissingPluginException",
      "identifiers": [
        "MissingPluginException",
        "shared_preferences",
        "plugins.flutter.io/shared_preferences"
      ],
      "test_files_affected": [
        "condition_evaluator_test.dart",
        "user_data_service_test.dart",
        "session_service_test.dart"
      ],
      "suggested_solutions": [
        "Add SharedPreferences.setMockInitialValues({}) to test setUp",
        "Mock UserDataService in tests that don't need actual persistence",
        "Use flutter_test's testWidgets with tester.binding.defaultBinaryMessenger"
      ],
      "priority": "medium",
      "blocking": false
    }
  ],
  "recommendations": [
    {
      "action": "Fix SharedPreferences test setup",
      "priority": "medium", 
      "effort": "low",
      "description": "Add proper SharedPreferences mocking to affected tests"
    },
    {
      "action": "Consider test categorization",
      "priority": "low",
      "effort": "low", 
      "description": "Add test tags to distinguish error tests from functional tests for clearer reporting"
    }
  ],
  "test_health": {
    "overall_status": "good",
    "error_coverage": "excellent",
    "genuine_failure_rate": "0.15%",
    "notes": "Most failures are intentional error-handling tests, indicating robust error coverage"
  }
}