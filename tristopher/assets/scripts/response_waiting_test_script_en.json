{
  "id": "response_waiting_test_script_en",
  "version": "1.0.0",
  "metadata": {
    "author": "Tristopher Team",
    "created_at": "2024-01-15T10:00:00Z",
    "description": "Test script demonstrating proper response waiting behavior",
    "supported_languages": ["en"],
    "is_active": true
  },
  "global_variables": {
    "robot_personality_level": 5,
    "default_delay_ms": 1000
  },
  "daily_events": [
    {
      "id": "response_test_sequence",
      "trigger": {
        "type": "time_window",
        "start": "00:00",
        "end": "23:59",
        "conditions": {}
      },
      "priority": 10,
      "variants": [
        {
          "id": "interactive_sequence",
          "weight": 1.0,
          "conditions": {},
          "messages": [
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Let me test if this system actually waits for your responses.",
              "delay": 1000
            },
            {
              "type": "text",
              "sender": "tristopher", 
              "content": "First, I'll ask you a question and WAIT for your answer.",
              "delay": 1500
            },
            {
              "type": "options",
              "sender": "tristopher",
              "content": "Are you ready for this test?",
              "options": [
                {
                  "id": "ready",
                  "text": "Yes, I'm ready",
                  "setVariables": {
                    "user_ready": true
                  }
                },
                {
                  "id": "not_ready",
                  "text": "Not yet...",
                  "setVariables": {
                    "user_ready": false
                  }
                }
              ]
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "If you're seeing this message BEFORE responding to the question above, the system is broken.",
              "delay": 1000
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "But if you only see this AFTER selecting an option, then it's working correctly!",
              "delay": 1500
            }
          ]
        }
      ],
      "responses": {
        "ready": {
          "next_event": "ready_response",
          "set_variables": {
            "user_ready": true,
            "test_phase": "ready_selected"
          }
        },
        "not_ready": {
          "next_event": "not_ready_response",
          "set_variables": {
            "user_ready": false,
            "test_phase": "not_ready_selected"
          }
        }
      }
    },
    {
      "id": "ready_response",
      "trigger": {
        "type": "user_action",
        "conditions": {}
      },
      "priority": 5,
      "variants": [
        {
          "id": "ready_variant",
          "weight": 1.0,
          "conditions": {},
          "messages": [
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Excellent! You said you're ready. This message should only appear AFTER you clicked the option.",
              "delay": 1000
            },
            {
              "type": "input",
              "sender": "tristopher",
              "content": "Now let's test input fields. What's your favorite color?",
              "inputConfig": {
                "hint": "Enter a color",
                "keyboardType": "TextInputType.text",
                "maxLength": 20
              }
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Again, if you see this message BEFORE entering a color, something's wrong.",
              "delay": 1000
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "But if it appears AFTER you submit your color, then the response waiting is working perfectly!",
              "delay": 1500
            }
          ]
        }
      ],
      "responses": {}
    },
    {
      "id": "not_ready_response",
      "trigger": {
        "type": "user_action",
        "conditions": {}
      },
      "priority": 5,
      "variants": [
        {
          "id": "not_ready_variant",
          "weight": 1.0,
          "conditions": {},
          "messages": [
            {
              "type": "text",
              "sender": "tristopher",
              "content": "I see you're not ready yet. That's... honest, I suppose.",
              "delay": 1000
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "This message should only appear AFTER you selected 'Not yet...'",
              "delay": 1500
            },
            {
              "type": "options",
              "sender": "tristopher",
              "content": "Want to try again when you're ready?",
              "options": [
                {
                  "id": "try_again",
                  "text": "Yes, let's try again",
                  "setVariables": {
                    "retry_attempt": true
                  }
                },
                {
                  "id": "give_up",
                  "text": "No, I give up",
                  "setVariables": {
                    "gave_up": true
                  }
                }
              ]
            }
          ]
        }
      ],
      "responses": {
        "try_again": {
          "next_event": "response_test_sequence",
          "set_variables": {
            "retry_count": 1
          }
        },
        "give_up": {
          "next_event": "give_up_response",
          "set_variables": {
            "gave_up": true
          }
        }
      }
    },
    {
      "id": "give_up_response",
      "trigger": {
        "type": "user_action",
        "conditions": {}
      },
      "priority": 5,
      "variants": [
        {
          "id": "give_up_variant",
          "weight": 1.0,
          "conditions": {},
          "messages": [
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Giving up already? How... predictably human.",
              "delay": 1000
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Well, at least the response waiting system worked properly.",
              "delay": 1500
            }
          ]
        }
      ],
      "responses": {}
    }
  ],
  "plot_timeline": {
    "day_1": {
      "events": [
        {
          "id": "response_waiting_intro",
          "messages": [
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Welcome to the Response Waiting Test.",
              "delay": 1000
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "This script will test whether the conversation engine properly pauses and waits for your responses.",
              "delay": 2000
            },
            {
              "type": "text",
              "sender": "tristopher",
              "content": "Pay attention to the message timing. Messages should only appear AFTER you respond to interactive elements.",
              "delay": 2500
            }
          ],
          "set_variables": {
            "intro_completed": true,
            "test_started": true
          }
        }
      ]
    }
  },
  "message_templates": {
    "response_confirmation": {
      "text": "You selected: {{last_response}}. This confirms the system waited for your input.",
      "variables": ["last_response"]
    },
    "timing_test": {
      "text": "If you see this at {{current_time}}, the timing is working correctly.",
      "variables": ["current_time"]
    }
  }
}